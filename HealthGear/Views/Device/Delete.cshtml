@model Device

<h2 class="text-danger">Eliminazione Dispositivo</h2>

<p>Attenzione: L'eliminazione di questo dispositivo comporterà la rimozione di tutte le informazioni correlate, inclusi
    dati di manutenzione, verifiche elettriche e controlli fisici. Questa azione è irreversibile.</p>

<div class="border p-3">
    <dl class="row">
        <dt class="col-sm-3">Nome Dispositivo</dt>
        <dd class="col-sm-9">@Model.Name</dd>

        <dt class="col-sm-3">Produttore</dt>
        <dd class="col-sm-9">@Model.Brand</dd>

        <dt class="col-sm-3">Modello</dt>
        <dd class="col-sm-9">@Model.Model</dd>

        <dt class="col-sm-3">Numero di Serie</dt>
        <dd class="col-sm-9">@Model.SerialNumber</dd>
    </dl>
</div>

<form asp-action="Delete" method="post" onsubmit="return validateDeletion()">
    <input type="hidden" asp-for="Id"/>

    <div class="form-group mt-3">
        <label for="confirmDeviceName">Per confermare, digita il nome del dispositivo:</label>
        <input type="text" id="confirmDeviceName" class="form-control"
               placeholder="Inserisci il nome esatto del dispositivo" required/>
    </div>

    <button type="submit" id="deleteButton" class="btn btn-danger mt-3" disabled>Elimina</button>
    <a asp-action="Index" class="btn btn-secondary mt-3">Annulla</a>
</form>

@section Scripts {
    <script>
        function validateDeletion() {
            var deviceName = "@Model.Name";
            var inputName = document.getElementById("confirmDeviceName").value;
            if (inputName !== deviceName) {
                alert("Il nome del dispositivo non corrisponde. Inserisci il nome corretto per procedere.");
                return false;
            }
            return true;
        }

        document.getElementById("confirmDeviceName").addEventListener("input", function () {
            var deleteButton = document.getElementById("deleteButton");
            deleteButton.disabled = this.value !== "@Model.Name";
        });
    </script>
}